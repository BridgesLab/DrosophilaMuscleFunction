{
    "contents" : "\\documentclass{article}\n\n\\usepackage{fullpage}\n\\usepackage[colorlinks=true]{hyperref}\n\\usepackage[tableposition=top]{caption}\n\\usepackage[utf8]{inputenc}\n\n\\begin{document}\n\\SweaveOpts{concordance=FALSE}\n\n\\title{Analysis of Birth Ratios for Double Knockout Autophagy/Raptor Crosses}\n\\author{Isabelle Hatfield and Dave Bridges}\n\\date{\\today}\n\\maketitle\n\n\n\\section*{Experimental Design}\n\nThis was for the second batch of \\textit{C179-Gal4} + \\textit{Raptor/Tsc1} knockdown crosses.\n\n<<data-input, echo=FALSE>>=\nbirths_worksheet_location <- 'https://docs.google.com/spreadsheet/pub?key=0Am2qM2oZ12_jdHl2WS1NNDlWeS0zMFJxVDJSU3ZvT1E&single=true&gid=0&output=csv' \nmapping_file <- '../Data/gene_mapping.csv'\nmapping.data <- read.csv(mapping_file)\nmapping.data$UAS <- as.factor(mapping.data$UAS)\n\nbirth_file_name <- '../Data/Double Knockout Birth Data.csv'\ndownload.file(births_worksheet_location, birth_file_name, method=\"curl\")\nbirth_data <- read.csv(birth_file_name)\n@\n\nThese data are stored in \\verb+\\Sexpr{getwd()}+, with the raw data saved in \\verb+\\Sexpr{birth_file_name}+ for the births.  This script was most recently run on \\Sexpr{date()}.\n\n\\section*{24B-GAL4 Driver}\n\nThis analysis is just for the C179 Driver.\n\n<<data-collection, echo=False>>=\nbirth_data$Total <- rowSums(birth_data[,6:9])\nall.flies <- colSums(birth_data[,6:9])\nrequire(plyr, quietly=T)\nbirth_data$Cross <- as.factor(paste(birth_data$Male, birth_data$Female, sep=\" x \"))\nbirth_data$Driver <- as.factor(sapply(strsplit(as.character(birth_data$Female), \"/\"),\"[\", 1))\nbirth_data$UAS.allele <- as.factor(sapply(strsplit(as.character(birth_data$Male), \",\"),\"[\", 2))\nbirth_data$UAS <- as.factor(sapply(strsplit(as.character(birth_data$UAS.allele), \"/\"),\"[\", 1))\n#need to merge this with mappng\ndata <- birth_data\n@\n\nThese data are stored in \\verb+\\Sexpr{getwd()}+, with the raw data saved in \\verb+\\Sexpr{birth_file_name}+.  This script was most recently run on \\Sexpr{date()}\n\n\\section*{Strain Summaries}\n\n<<data-analysis, echo=FALSE>>=\ngene.summarised.data <- ddply(data, .(Driver,UAS), summarise, \n      Double_Knockdown = sum(WT),\n      Raptor_Only = sum(sb),\n      ATG_Only = sum(cyo),\n      Wild_Type = sum(cyo.sb),\n      Total = as.integer(sum(Total)))\n\ngene.summarised.data$pval <-rep(NA, dim(gene.summarised.data)[1])\nfor (n in seq(1,dim(gene.summarised.data)[1])) {   \n  values <- gene.summarised.data[n,3:5]\n  test <- chisq.test(values, p=rep(1,3), rescale.p=T)\n  gene.summarised.data[n,]$pval <- test$p.value  \n}\ngene.summarised.data$padj <- p.adjust(gene.summarised.data$pval, method=\"BH\")\n\n\n\nsummarised.data.gendered <- ddply(data, .(Driver, UAS,Gender), summarise, \n      Double_Knockdown = sum(WT),\n      Raptor_Only = sum(sb),\n      ATG_Only = sum(cyo),\n      Wild_Type = sum(cyo.sb),\n      Total = as.integer(sum(Total)))\n\nsummarised.data.gendered$pval <-rep(NA, dim(summarised.data.gendered)[1])\nfor (n in seq(1,dim(summarised.data.gendered)[1])) {   \n  values <- summarised.data.gendered[n,4:6]\n  test <- chisq.test(values, p=rep(1,3), rescale.p=T)\n  summarised.data.gendered[n,]$pval <- test$p.value  \n}\nsummarised.data.gendered$padj <- p.adjust(summarised.data.gendered$pval, method=\"BH\")\n\n\n@\n\n\n\n<<label=data-tables,echo=FALSE,results=tex>>=\nrequire(xtable)\nprint(xtable(gene.summarised.data, caption=\"Gene Level Summarised Data\", label=\"tab:gene_summarised_data\", digits = c(rep(0,8),5,5)), include.rownames=F)\nprint(xtable(summarised.data.gendered, caption=\"Gendered Gene Level Summarised Data\", label=\"tab:driver_summarised_data\", digits = c(rep(0,9),5,5)), include.rownames=F)\n@\n\n\\subsection*{Crosses with no Knockdown Progeny}\n\nSo far some crosses have produced no knockdown progeny.  These are described in Table \\ref{tab:no_kd_flies}\n\n<<label=data-tables-2,echo=FALSE,results=tex>>=\nprint(xtable(summarised.data.gendered[summarised.data.gendered$KD == 0,1:6], caption=\"Crosses with no Knockdown Flies\", label=\"tab:no_kd_flies\"))\n@\n\\begin{figure}\n\\begin{center}\n<<label=c179-gendered-figure,fig=TRUE,echo=FALSE>>=\n#gene.summarised.data$KD.prop <- gene.summarised.data$KD/gene.summarised.data$Total\n#gene.summarised.data$shRNA.prop <- gene.summarised.data$shRNA/gene.summarised.data$Total.No.WT\n#gene.summarised.data$GAL4.prop <- gene.summarised.data$GAL4/gene.summarised.data$Total.No.WT\n\n#calculated standard errors\n#driver.summarised.data$KD.err <- with(driver.summarised.data, sqrt((KD.prop*(1-KD.prop)/Total.No.WT)))\n#driver.summarised.data$shRNA.err <- with(driver.summarised.data, sqrt((shRNA.prop*(1-shRNA.prop)/Total.No.WT)))\n#driver.summarised.data$GAL4.err <- with(driver.summarised.data, sqrt((GAL4.prop*(1-GAL4.prop)/Total.No.WT)))\n\npar(mar=c(12,4.1,4.1,2.1))\nplot <- barplot(as.numeric(gene.summarised.data[3:6]),\n        beside=T,las=2,\n        names.arg=names(gene.summarised.data[3:6]),\n        ylab=\"Number of Eclosed Flies\",\n        main=\"24B-Gal4 Driver\")\n\nsuperpose.eb <- \n function (x, y, ebl, ebu = ebl, length = 0.08, ...) \n arrows(x, y + ebu, x, y - ebl, angle = 90, code = 3, \n length = length, ...)\n\n#superpose.eb(plot, \n#             t(as.matrix(driver.summarised.data[driver.summarised.data$Driver==\"24B-Gal4\",c('KD.prop','shRNA.prop','GAL4.prop')])),\n#             t(as.matrix(driver.summarised.data[driver.summarised.data$Driver==\"24B-Gal4\",c('KD.err','shRNA.err','GAL4.err')])))\n@\n\\end{center}\n\\caption{Gender Specific Differences Between C517-Gal4 Driven Raptor Knockdown Strains}\n\\label{fig:179-gendered}\n\\end{figure}\n\n     \n<<bibliography, include=F, echo=F>>=\nrequire(bibtex)\nwrite.bib(c(names(sessionInfo()$otherPkgs),'base','stats','utils'), file='birth-references.bib')\n@\n\nThe key packages used in this analysis were R \\cite{base} and plyr \\cite{plyr}\n\n\\bibliography{birth-references}\n\\bibliographystyle{unsrt}\n\n\\section*{Session Information}\n<<sessionInfo, results=tex, echo=F>>=\ntoLatex(sessionInfo())\n@\n\n\\end{document}",
    "created" : 1393254857193.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1535507985",
    "id" : "AB15E07D",
    "lastKnownWriteTime" : 1393255850,
    "path" : "/Volumes/bridges_lab/Hatfield/Drosophila/Births/birth-rates-double-knockouts.Rnw",
    "project_path" : null,
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "sweave"
}